const webpack = require('webpack')

const webpackConfig = Object.create(require('./webpack.config.js'))

webpackConfig.output = Object.create(webpackConfig.output)
webpackConfig.output.filename = webpackConfig.output.filename.replace(/\.js$/, '.min.js')

delete webpackConfig.resolve.alias
webpackConfig.externals = {
  react: 'React',
  'react-dom': 'ReactDOM'
}

webpackConfig.plugins = webpackConfig.plugins.concat(
  new webpack.optimize.UglifyJsPlugin({ minimize: true, sourceMap: true })
)

module.exports = webpackConfig
